<!DOCTYPE html>
<html lang="zh-CN">
  <head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <link rel="stylesheet" href="/assets/css/style.css">
  <link rel="stylesheet" href="/assets/css/syntax.css">

  <link rel="shortcut icon" href="/assets/images/logo.png " type="image/png">
  <link rel="icon" href="/assets/images/logo.png " type="image/png">

  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>在 Linux 下使用二进制包安装 PostgreSQL | Hugo Chou 周昌权</title>
<meta name="generator" content="Jekyll v4.3.2" />
<meta property="og:title" content="在 Linux 下使用二进制包安装 PostgreSQL" />
<meta name="author" content="Hugo Chou" />
<meta property="og:locale" content="zh_CN" />
<meta name="description" content="今天在公司的内网中终于成功使用编译好的二进制包安装 PostgreSQL，记录一下，以免下次安装又忘记了操作步骤。本文应该对于那些机器不能联网、但已经有了编译好的 PostgreSQL 安装包、却不知道如何配置和启动 PostgreSQL 的同学有帮助。" />
<meta property="og:description" content="今天在公司的内网中终于成功使用编译好的二进制包安装 PostgreSQL，记录一下，以免下次安装又忘记了操作步骤。本文应该对于那些机器不能联网、但已经有了编译好的 PostgreSQL 安装包、却不知道如何配置和启动 PostgreSQL 的同学有帮助。" />
<link rel="canonical" href="https://hugochougt.com/blog/install-postgresql-with-binary-package-on-linux" />
<meta property="og:url" content="https://hugochougt.com/blog/install-postgresql-with-binary-package-on-linux" />
<meta property="og:site_name" content="Hugo Chou 周昌权" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2013-11-13T20:43:00+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="在 Linux 下使用二进制包安装 PostgreSQL" />
<meta name="twitter:site" content="@hugochougt" />
<meta name="twitter:creator" content="@hugochougt" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Hugo Chou","url":"https://hugochougt.com"},"dateModified":"2013-11-13T20:43:00+00:00","datePublished":"2013-11-13T20:43:00+00:00","description":"今天在公司的内网中终于成功使用编译好的二进制包安装 PostgreSQL，记录一下，以免下次安装又忘记了操作步骤。本文应该对于那些机器不能联网、但已经有了编译好的 PostgreSQL 安装包、却不知道如何配置和启动 PostgreSQL 的同学有帮助。","headline":"在 Linux 下使用二进制包安装 PostgreSQL","mainEntityOfPage":{"@type":"WebPage","@id":"https://hugochougt.com/blog/install-postgresql-with-binary-package-on-linux"},"publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://hugochougt.com/assets/images/logo.png"},"name":"Hugo Chou"},"url":"https://hugochougt.com/blog/install-postgresql-with-binary-package-on-linux"}</script>
<!-- End Jekyll SEO tag -->

</head>

  <body>
    <nav class="flex flex-wrap items-center justify-center px-2 py-6">
  <div class="container px-4 mx-auto flex flex-wrap items-center justify-center">
    <div class="flex md:block" id="navbar">
      <div class="flex mr-auto w-full">
        
        <a class="text-sm text-gray-500 hover:text-gray-900 px-3 py-2 lg:py-1 mx-auto uppercase"
          href="/">
          Home
        </a>
        
        <a class="text-sm text-gray-500 hover:text-gray-900 px-3 py-2 lg:py-1 mx-auto uppercase"
          href="/blog/">
          Blog
        </a>
        
      </div>
    </div>
  </div>
</nav>


<div class="flex flex-wrap items-center justify-center mx-auto px-4 pt-4 prose prose-stone">
  <h1 class="text-center mt-6 mb-6">在 Linux 下使用二进制包安装 PostgreSQL</h1>
  <article class="py-1">
    <p>今天在公司的内网中终于成功使用编译好的二进制包安装 PostgreSQL，记录一下，以免下次安装又忘记了操作步骤。本文应该对于那些机器不能联网、但已经有了编译好的 PostgreSQL 安装包、却不知道如何配置和启动 PostgreSQL 的同学有帮助。</p>

<p>编译好的 PostgreSQL 安装包大概具有以下的目录结构：</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>bin/
lib/
share/
include/
</code></pre></div></div>

<p>本文假设 PostgreSQL 安装在 $PGSQL_HOME 目录中。</p>

<h2 id="创建-data-目录">创建 data 目录</h2>

<p>首先创建一个用于存放 PostgreSQL 数据库系统数据的文件夹，一般在 PostgreSQL 的根目录下创建就好了。</p>

<h2 id="初始化数据库">初始化数据库</h2>

<p>使用 <code class="language-plaintext highlighter-rouge">initdb</code> 命令初始化数据。最好能指定一些参数，例如：</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>initdb -D $PGSQL_HOME/data -A trust -U &lt;username&gt; -W
</code></pre></div></div>

<p>其中 -D 指示保存数据库数据的目录，-A 指示可以从本机连接数据库，-U 指示数据库的初始超级用户名， -W 指示需要设置密码。回车后就需要你输入两次密码了，根据提示来做就好。更详细的参数选项可用 <code class="language-plaintext highlighter-rouge">initdb --help</code> 查看。</p>

<h2 id="启动数据库服务">启动数据库服务</h2>

<p>运行 <code class="language-plaintext highlighter-rouge">pg_ctl start -D $PGSQL_HOME/data</code> 命令就可以，没什么可说的。完成后用 <code class="language-plaintext highlighter-rouge">ps -ef | grep postgre</code> 确认后台进程成功运行。</p>

<h2 id="配置-ld_library_path">配置 LD_LIBRARY_PATH</h2>

<p>编辑 $HOME/.bashrc 文件，添加 $PGSQL_HOME/lib 目录到 $LD_LIBRARY_PATH 环境变量中：</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>export LD_LIBRARY_PATH=$PGSQL_HOME/lib:$LD_LIBRARY_PATH
</code></pre></div></div>

<p>然后 <code class="language-plaintext highlighter-rouge">source $HOME/.bashrc</code> 使环境变量生效。这个对于正确配置 PostgreSQL 是关键一步，之前我死活不能通过客户端连上 PostgreSQL 就是没有配置这个环境变量。没有配这个环境变量，会在执行创建数据库和连接数据库的时候出现 <strong>undefined symbol PQconnectdbParams</strong> 的错误。</p>

<h2 id="创建数据库">创建数据库</h2>

<p>使用 <code class="language-plaintext highlighter-rouge">createdb &lt;dbname&gt;</code> 命令来创建数据库。</p>

<h2 id="访问数据库">访问数据库</h2>

<p>使用 <code class="language-plaintext highlighter-rouge">psql &lt;dbname&gt;</code> 命令来访问数据库。</p>

<p>-EOF-</p>

  </article>
</div>

    <footer class="relative px-4 pt-4 pb-4">
  <div class="flex flex-wrap items-center justify-center">
    <div class="text-sm text-gray-300">
      &copy; 2023 Hugo Chou
    </div>
  </div>
</footer>

  </body>
</html>
