<!DOCTYPE html>
<html lang="zh-CN">
  <head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <link rel="stylesheet" href="/assets/css/style.css">
  <link rel="stylesheet" href="/assets/css/syntax.css">

  <link rel="shortcut icon" href="/assets/images/logo.png " type="image/png">
  <link rel="icon" href="/assets/images/logo.png " type="image/png">

  <!-- Begin Jekyll SEO tag v2.8.0 -->
<title>mysqldump 命令的一些用法 | Hugo Chou 周昌权</title>
<meta name="generator" content="Jekyll v4.3.2" />
<meta property="og:title" content="mysqldump 命令的一些用法" />
<meta name="author" content="Hugo Chou" />
<meta property="og:locale" content="zh_CN" />
<meta name="description" content="导出某个数据库的所有表" />
<meta property="og:description" content="导出某个数据库的所有表" />
<link rel="canonical" href="https://hugochougt.com/blog/notes-of-mysqldump" />
<meta property="og:url" content="https://hugochougt.com/blog/notes-of-mysqldump" />
<meta property="og:site_name" content="Hugo Chou 周昌权" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2014-05-08T19:23:00+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="mysqldump 命令的一些用法" />
<meta name="twitter:site" content="@hugochougt" />
<meta name="twitter:creator" content="@hugochougt" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","author":{"@type":"Person","name":"Hugo Chou","url":"https://hugochougt.com"},"dateModified":"2014-05-08T19:23:00+00:00","datePublished":"2014-05-08T19:23:00+00:00","description":"导出某个数据库的所有表","headline":"mysqldump 命令的一些用法","mainEntityOfPage":{"@type":"WebPage","@id":"https://hugochougt.com/blog/notes-of-mysqldump"},"publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://hugochougt.com/assets/images/logo.png"},"name":"Hugo Chou"},"url":"https://hugochougt.com/blog/notes-of-mysqldump"}</script>
<!-- End Jekyll SEO tag -->

</head>

  <body>
    <nav class="flex flex-wrap items-center justify-center px-2 py-6">
  <div class="container px-4 mx-auto flex flex-wrap items-center justify-center">
    <div class="flex md:block" id="navbar">
      <div class="flex mr-auto w-full">
        
        <a class="text-sm text-gray-500 hover:text-gray-900 px-3 py-2 lg:py-1 mx-auto uppercase"
          href="/">
          Home
        </a>
        
        <a class="text-sm text-gray-500 hover:text-gray-900 px-3 py-2 lg:py-1 mx-auto uppercase"
          href="/blog/">
          Blog
        </a>
        
      </div>
    </div>
  </div>
</nav>


<div class="flex flex-wrap items-center justify-center mx-auto px-4 pt-4 prose prose-stone">
  <h1 class="text-center mt-6 mb-6">mysqldump 命令的一些用法</h1>
  <article class="py-1">
    <p>导出某个数据库的所有表</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mysqldump -uroot -p database &gt; db_backup.sql
</code></pre></div></div>

<p>这个默认会导出 triggers，但是不导出 stored routines 和 events。不想导出 triggers 请添加 <code class="language-plaintext highlighter-rouge">--skip-triggers</code> 参数。</p>

<p>完整备份（包括 stored routines 和 events）整个数据库</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mysqldump -uroot -p -R -E database &gt; db_backup.sql
</code></pre></div></div>

<p><code class="language-plaintext highlighter-rouge">-R</code> 表示导出 stored routines （包括了 functions 和 procedures），<code class="language-plaintext highlighter-rouge">-E</code> 表示导出 events。</p>

<p>只想导出表结构而不要数据，可以加 <code class="language-plaintext highlighter-rouge">-d</code> 参数</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mysqldump -uroot -p -d database &gt; db_backup.sql
</code></pre></div></div>

<p>这是最近几天的工作需要修改表字段，经常需要备份测试数据库而用到的一些命令参数，在此记录一下。</p>

<p>另外，查看了 mysqldump 命令帮助信息（使用 <code class="language-plaintext highlighter-rouge">mysqldump --help</code> 列出），发现它的说明还是很详尽的，再记录一下自己认为重要的默认设置，及其开启/关闭选项。</p>

<p><code class="language-plaintext highlighter-rouge">--opt</code> 默认开启，其相当添加了下列的参数：–add-drop-table, –add-locks, –create-options, –quick, –extended-insert, –lock-tables, –set-charset, –disable-keys。这个看英文也能大致知道其作用，就不一一解释了。要关闭该选项，使用 <code class="language-plaintext highlighter-rouge">--skip-opt</code>。</p>

<p><code class="language-plaintext highlighter-rouge">--add-drop-table</code> 默认开启，就是在每一条 CREATE 命令前加上 DROP TABLE。</p>

<p>最后就是前面提到的 triggers、stored routines 和 events了，这些都容易在备份数据库的时候被忽略，还请注意。</p>

<p>-EOF-</p>

  </article>
</div>

    <footer class="relative px-4 pt-4 pb-4">
  <div class="flex flex-wrap items-center justify-center">
    <div class="text-sm text-gray-300">
      &copy; 2023 Hugo Chou
    </div>
  </div>
</footer>

  </body>
</html>
